<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ã€å…ˆç€50åé™å®šã€‘ç„¡æ–™ã§5ä¸‡å††ç‰¹å…¸ï¼‹åˆå¿ƒè€…ã‚‚ç¨¼ãã‚¹ãƒãƒ›FXã‚µãƒ­ãƒ³</title>
    
    <!-- å†…éƒ¨ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯é™¤å¤–ã‚¹ã‚¯ãƒªãƒ—ãƒˆ -->
    <script>
    (function() {
      // URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ãƒã‚§ãƒƒã‚¯
      const params = new URLSearchParams(window.location.search);
      
      // ?internal=1 ã§ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã€å†…éƒ¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã—ã¦ç™»éŒ²
      if (params.get('internal') === '1') {
        localStorage.setItem('wicle_internal_user', 'true');
        console.log('âœ… å†…éƒ¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã—ã¦ç™»éŒ²ã•ã‚Œã¾ã—ãŸ');
      }
      
      // ?internal=0 ã§å†…éƒ¨ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šã‚’è§£é™¤ï¼ˆãƒ†ã‚¹ãƒˆç”¨ï¼‰
      if (params.get('internal') === '0') {
        localStorage.removeItem('wicle_internal_user');
        console.log('âœ… å†…éƒ¨ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šã‚’è§£é™¤ã—ã¾ã—ãŸ');
      }
      
      // å†…éƒ¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å ´åˆã€Wicleè¨ˆæ¸¬ã‚’ç„¡åŠ¹åŒ–
      if (localStorage.getItem('wicle_internal_user') === 'true') {
        console.log('ğŸš« å†…éƒ¨ãƒ¦ãƒ¼ã‚¶ãƒ¼: Wicleè¨ˆæ¸¬ã‚’ç„¡åŠ¹åŒ–');
        
        // Wicleã®ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡ã‚’ç„¡åŠ¹åŒ–
        window.wicle = function() {
          console.log('ğŸš« Wicle event blocked (internal):', arguments[0], arguments[1]);
        };
        
        // KARTEã‚¿ã‚°ã®å®Ÿè¡Œã‚’é˜²ã
        window.KARTE_DISABLED = true;
      }
    })();
    </script>
    
    <!-- Start KARTE Tag -->
    <script>!function(n){if(!window[n]){var o=window[n]=function(){var n=[].slice.call(arguments);return o.x?o.x.apply(0,n):o.q.push(n)};o.q=[],o.i=Date.now(),o.allow=function(){o.o="allow"},o.deny=function(){o.o="deny"}}}("krt")</script>
    <script async src="https://cdn-edge.karte.io/d29182c7d5ead1f33c38585822e2009c/edge.js"></script>
    <!-- End KARTE Tag -->
    <!-- Swiper.js CDN -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        html, body {
            width: 100vw;
            width: 100%;
            height: 100vh;
            height: 100dvh;
            overflow: hidden;
            position: fixed;
            top: 0;
            left: 0;
            touch-action: pan-y;
            -webkit-font-smoothing: antialiased;
            -webkit-overflow-scrolling: touch;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: linear-gradient(to right, #ffffff 0%, #cfdfff 100%);
            background-attachment: fixed;
            margin: 0;
            padding: 0;
        }
        
        .swiper-container {
            width: 100vw;
            width: 100%;
            height: 100vh;
            height: 100dvh;
            position: relative;
            overflow: hidden;
            background: linear-gradient(to right, #ffffff 0%, #cfdfff 100%);
        }
        
        .swiper-wrapper {
            display: flex;
            flex-direction: column;
        }
        
        .swiper-slide {
            width: 100vw;
            width: 100%;
            height: 100vh;
            height: 100dvh;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            justify-content: flex-start;
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
            background: linear-gradient(to right, #ffffff 0%, #cfdfff 100%);
        }
        
        .slide-image {
            width: 100vw;
            width: 100%;
            height: auto;
            max-width: 100%;
            object-fit: contain;
            display: block;
            user-select: none;
            -webkit-user-drag: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            pointer-events: none;
            flex-shrink: 0;
            margin: 0;
            margin-top: 0;
            padding: 0;
            padding-top: 0;
        }
        
        /* ã‚¹ãƒ©ã‚¤ãƒ‰ã”ã¨ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢ï¼ˆå‰Šé™¤æ¸ˆã¿ - ç”»åƒã®ã¿è¡¨ç¤ºï¼‰ */
        
        /* ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ - å³éš…ãƒ›ãƒƒãƒ‘ãƒ¼å‹ */
        .swiper-pagination {
            position: fixed;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            -webkit-transform: translateY(-50%);
            width: 4px;
            left: auto;
            z-index: 50;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            padding: 8px 0;
        }
        
        .swiper-pagination-bullet {
            width: 4px;
            height: 20px;
            background: rgba(255, 255, 255, 0.3);
            opacity: 1;
            margin: 0;
            border: none;
            border-radius: 2px;
            transition: all 0.3s ease;
            -webkit-transition: all 0.3s ease;
            cursor: pointer;
            display: block;
        }
        
        .swiper-pagination-bullet-active {
            background: #FFD700;
            width: 4px;
            height: 32px;
            box-shadow: 0 0 8px rgba(255, 215, 0, 0.6);
            -webkit-box-shadow: 0 0 8px rgba(255, 215, 0, 0.6);
        }
        
        /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³çŸ¢å° */
        .swiper-nav {
            position: fixed;
            left: 50%;
            transform: translateX(-50%);
            z-index: 30;
            display: flex;
            gap: 20px;
            pointer-events: none;
        }
        
        .swiper-nav-arrow {
            width: 44px;
            height: 44px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            pointer-events: auto;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            transition: all 0.2s ease;
            opacity: 0.8;
        }
        
        .swiper-nav-arrow:active {
            transform: scale(0.9);
            opacity: 1;
        }
        
        .swiper-nav-arrow.disabled {
            opacity: 0.3;
            pointer-events: none;
        }
        
        .swiper-nav-arrow svg {
            width: 24px;
            height: 24px;
            fill: #333;
        }
        
        .swiper-nav-arrow.prev {
            top: 0;
        }
        
        .swiper-nav-arrow.next {
            bottom: 180px;
            bottom: calc(180px + env(safe-area-inset-bottom));
        }
        
        
        /* ãƒ•ãƒƒã‚¿ãƒ¼å›ºå®šCTAï¼ˆå¸¸æ™‚è¡¨ç¤ºï¼‰ */
        .footer-cta {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 100;
            background: linear-gradient(to top, rgba(255, 255, 255, 0.95) 0%, rgba(207, 223, 255, 0.9) 70%, transparent 100%);
            padding: 12px 20px 20px;
            padding-bottom: max(20px, calc(20px + env(safe-area-inset-bottom)));
        }
        
        .footer-cta.hidden {
            display: none;
        }
        
        /* ã‚¹ãƒ¯ã‚¤ãƒ—èª˜å°ãƒ†ã‚­ã‚¹ãƒˆ */
        .swipe-hint {
            text-align: center;
            color: #ffffff;
            font-size: 13px;
            margin-bottom: 12px;
            font-weight: 500;
            letter-spacing: 0.5px;
            background: rgba(0, 0, 0, 0.5);
            padding: 8px 16px;
            border-radius: 25px;
            display: none;
            animation: bounceVertical 1.5s ease-in-out infinite;
        }
        
        @keyframes bounceVertical {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }
        
        .line-button {
            width: 100%;
            max-width: 400px;
            margin: 0 auto;
            display: block;
            background: #06C755;
            color: #fff;
            text-align: center;
            padding: 22px 20px;
            border-radius: 14px;
            text-decoration: none;
            font-size: 20px;
            font-weight: bold;
            box-shadow: 0 8px 24px rgba(6, 199, 85, 0.5), 0 4px 12px rgba(6, 199, 85, 0.3);
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
            animation: pulse 2s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% {
                box-shadow: 0 8px 24px rgba(6, 199, 85, 0.5), 0 4px 12px rgba(6, 199, 85, 0.3);
                transform: scale(1);
            }
            50% {
                box-shadow: 0 12px 32px rgba(6, 199, 85, 0.7), 0 6px 16px rgba(6, 199, 85, 0.5);
                transform: scale(1.02);
            }
        }
        
        .line-button:active {
            transform: scale(0.98);
            box-shadow: 0 4px 16px rgba(6, 199, 85, 0.4);
            animation: none;
        }
        
        
        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–èª¿æ•´ */
        @media (max-width: 480px) {
            .swiper-pagination {
                right: 6px;
                width: 3px;
            }
            
            .swiper-pagination-bullet {
                width: 3px;
                height: 18px;
            }
            
            .swiper-pagination-bullet-active {
                width: 3px;
                height: 28px;
            }
            
            .swiper-nav-arrow {
                width: 40px;
                height: 40px;
            }
            
            .swiper-nav-arrow svg {
                width: 20px;
                height: 20px;
            }
            
            .footer-cta {
                padding: 12px 15px 18px;
                padding-bottom: max(18px, calc(18px + env(safe-area-inset-bottom)));
            }
            
            .swipe-hint {
                font-size: 12px;
                margin-bottom: 10px;
                padding: 6px 14px;
            }
            
            .line-button {
                padding: 20px 18px;
                font-size: 19px;
            }
        }
        
        /* Safari/Chromeå¯¾å¿œã®è¿½åŠ ã‚¹ã‚¿ã‚¤ãƒ« */
        @supports (-webkit-touch-callout: none) {
            /* Safariå°‚ç”¨ */
            .swiper-container {
                height: -webkit-fill-available;
            }
            
            .swiper-slide {
                height: -webkit-fill-available;
            }
        }
        
        /* æ¨ªç”»é¢å¯¾å¿œ */
        @media (orientation: landscape) and (max-height: 500px) {
            .slide-image {
                max-height: 100vh;
                max-height: 100dvh;
            }
        }
        
        /* iOS Safariå¯¾å¿œ */
        @media screen and (-webkit-min-device-pixel-ratio: 0) {
            .swiper-container {
                -webkit-transform: translateZ(0);
                transform: translateZ(0);
            }
        }
    </style>
</head>
<body>
    <!-- Swiper -->
    <div class="swiper-container" id="mainSwiper">
        <div class="swiper-wrapper">
            <!-- ã‚¹ãƒ©ã‚¤ãƒ‰1: Hero -->
            <div class="swiper-slide" data-slide="Hero" data-slide-number="1">
                <img src="./images/01_hero.jpg" alt="Hero" class="slide-image">
            </div>
            
            <!-- ã‚¹ãƒ©ã‚¤ãƒ‰2: Comparison -->
            <div class="swiper-slide" data-slide="Comparison" data-slide-number="2">
                <img src="./images/02_comparison.jpg" alt="Comparison" class="slide-image">
            </div>
            
            <!-- ã‚¹ãƒ©ã‚¤ãƒ‰3: Before After -->
            <div class="swiper-slide" data-slide="BeforeAfter" data-slide-number="3">
                <img src="./images/03_before_after.jpg" alt="Before After" class="slide-image">
            </div>
            
            <!-- ã‚¹ãƒ©ã‚¤ãƒ‰4: Benefits -->
            <div class="swiper-slide" data-slide="Benefits" data-slide-number="4">
                <img src="./images/04_benefits.jpg" alt="Benefits" class="slide-image">
            </div>
            
            <!-- ã‚¹ãƒ©ã‚¤ãƒ‰5: Anxiety -->
            <div class="swiper-slide" data-slide="Anxiety" data-slide-number="5">
                <img src="./images/05_anxiety.jpg" alt="Anxiety" class="slide-image">
            </div>
            
            <!-- ã‚¹ãƒ©ã‚¤ãƒ‰6: Testimonial C -->
            <div class="swiper-slide" data-slide="TestimonialC" data-slide-number="6">
                <img src="./images/06_testimonial_c.jpg" alt="Testimonial C" class="slide-image">
            </div>
            
            <!-- ã‚¹ãƒ©ã‚¤ãƒ‰7: Testimonial A -->
            <div class="swiper-slide" data-slide="TestimonialA" data-slide-number="7">
                <img src="./images/07_testimonial_a.jpg" alt="Testimonial A" class="slide-image">
            </div>
            
            <!-- ã‚¹ãƒ©ã‚¤ãƒ‰8: Testimonial B -->
            <div class="swiper-slide" data-slide="TestimonialB" data-slide-number="8">
                <img src="./images/08_testimonial_b.jpg" alt="Testimonial B" class="slide-image">
            </div>
            
            <!-- ã‚¹ãƒ©ã‚¤ãƒ‰9: TradeLog Pro -->
            <div class="swiper-slide" data-slide="TradeLogPro" data-slide-number="9">
                <img src="./images/09_tradelog_pro.jpg" alt="TradeLog Pro" class="slide-image">
            </div>
        </div>
        
        <!-- ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ -->
        <div class="swiper-pagination"></div>
        
        <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³çŸ¢å°ï¼ˆ1ãƒšãƒ¼ã‚¸ç›®ã®ã¿è¡¨ç¤ºï¼‰ -->
        <div class="swiper-nav">
            <div class="swiper-nav-arrow next" id="nextArrow">
                <svg viewBox="0 0 24 24">
                    <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6z"/>
                </svg>
            </div>
        </div>
    </div>
    
    <!-- ãƒ•ãƒƒã‚¿ãƒ¼å›ºå®šCTAï¼ˆå¸¸æ™‚è¡¨ç¤ºç‰ˆï¼‰ -->
    <div class="footer-cta" id="footerCta">
        <div class="swipe-hint">â†‘ ã‚¹ãƒ¯ã‚¤ãƒ—ã—ã¦ç¶šãã‚’è¦‹ã‚‹</div>
        <a href="https://line.me/R/ti/p/@670ndecw" class="line-button" id="lineButton" data-cta="footer-line">
            ç„¡æ–™ã§Â¥50,000åˆ†ã®ç‰¹å…¸ã‚’å—ã‘å–ã‚‹ğŸ
        </a>
    </div>
    
    <script>
        // ============================================
        // ã‚¤ãƒ™ãƒ³ãƒˆè§£æãƒ»ãƒ­ã‚°å‡ºåŠ›ã‚·ã‚¹ãƒ†ãƒ 
        // ============================================
        const Analytics = {
            events: [],
            enabled: true,
            
            log: function(type, data) {
                const event = {
                    timestamp: new Date().toISOString(),
                    type: type,
                    data: data
                };
                
                this.events.push(event);
                
                // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›
                if (this.enabled) {
                    console.log(`[Analytics] ${type}:`, data);
                }
                
                // ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°è¡¨ç¤ºï¼ˆå‰Šé™¤æ¸ˆã¿ï¼‰
                
                // ã“ã“ã§å¤–éƒ¨APIã«é€ä¿¡ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½
                // this.sendToAPI(event);
            },
            
            
            // å¤–éƒ¨APIé€ä¿¡ã®ä¾‹ï¼ˆå¿…è¦ã«å¿œã˜ã¦å®Ÿè£…ï¼‰
            sendToAPI: function(event) {
                // fetch('/api/analytics', {
                //     method: 'POST',
                //     headers: { 'Content-Type': 'application/json' },
                //     body: JSON.stringify(event)
                // });
            },
            
            // ã‚¤ãƒ™ãƒ³ãƒˆå±¥æ­´ã‚’å–å¾—
            getEvents: function() {
                return this.events;
            },
            
            // ç‰¹å®šã®ã‚¿ã‚¤ãƒ—ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’å–å¾—
            getEventsByType: function(type) {
                return this.events.filter(e => e.type === type);
            }
        };
        
        // ============================================
        // SwiperåˆæœŸåŒ–
        // ============================================
        const swiper = new Swiper('.swiper-container', {
            direction: 'vertical',
            slidesPerView: 1,
            spaceBetween: 0,
            mousewheel: {
                enabled: true,
                sensitivity: 1.5,
                releaseOnEdges: true,
            },
            touchEventsTarget: 'container',
            touchRatio: 1.5,
            touchAngle: 45,
            resistance: false,
            resistanceRatio: 0,
            speed: 300,
            freeMode: false,
            pagination: {
                el: '.swiper-pagination',
                clickable: true,
                bulletClass: 'swiper-pagination-bullet',
                bulletActiveClass: 'swiper-pagination-bullet-active',
            },
            threshold: 10,
            longSwipes: true,
            longSwipesRatio: 0.5,
            longSwipesMs: 300,
            iOSEdgeSwipeDetection: true,
            iOSEdgeSwipeThreshold: 20,
        });
        
        // ============================================
        // ã‚¹ãƒ¯ã‚¤ãƒ—ã‚¤ãƒ™ãƒ³ãƒˆè§£æ
        // ============================================
        swiper.on('slideChange', function() {
            const slideIndex = swiper.activeIndex;
            const slideEl = swiper.slides[slideIndex];
            const slideName = slideEl.getAttribute('data-slide');
            const slideNumber = slideEl.getAttribute('data-slide-number');
            
            Analytics.log('swipe', {
                slideIndex: slideIndex,
                slideName: slideName,
                slideNumber: slideNumber,
                direction: 'changed',
                timestamp: Date.now()
            });
            
            // ã‚¹ãƒ¯ã‚¤ãƒ—èª˜å°ã®è¡¨ç¤º/éè¡¨ç¤ºï¼ˆ1ãƒšãƒ¼ã‚¸ç›®ã®ã¿è¡¨ç¤ºï¼‰
            const hint = document.querySelector('.swipe-hint');
            if (hint) {
                if (slideIndex === 0) {
                    hint.style.display = 'block';
                } else {
                    hint.style.display = 'none';
                }
            }
            
            // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³çŸ¢å°ã®æ›´æ–°ï¼ˆ1ãƒšãƒ¼ã‚¸ç›®ã®ã¿è¡¨ç¤ºï¼‰
            updateNavArrows();
            
            // å›ºå®šCTAã®è¡¨ç¤ºåˆ¶å¾¡ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
            // toggleFooterCta(slideIndex);
        });
        
        swiper.on('slideChangeTransitionStart', function() {
            Analytics.log('swipe_start', {
                slideIndex: swiper.activeIndex,
                timestamp: Date.now()
            });
        });
        
        swiper.on('slideChangeTransitionEnd', function() {
            Analytics.log('swipe_end', {
                slideIndex: swiper.activeIndex,
                timestamp: Date.now()
            });
        });
        
        swiper.on('touchStart', function() {
            Analytics.log('touch_start', {
                timestamp: Date.now()
            });
        });
        
        swiper.on('touchEnd', function() {
            Analytics.log('touch_end', {
                timestamp: Date.now()
            });
        });
        
        // ============================================
        // CTAã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆè§£æ
        // ============================================
        document.querySelectorAll('[data-cta]').forEach(button => {
            button.addEventListener('click', function(e) {
                const ctaId = this.getAttribute('data-cta');
                const slideIndex = swiper.activeIndex;
                const slideEl = swiper.slides[slideIndex];
                const slideName = slideEl.getAttribute('data-slide');
                const slideNumber = slideEl.getAttribute('data-slide-number');
                const buttonType = this.classList.contains('line-button') ? 'footer' : 'slide';
                const buttonText = this.textContent.trim();
                
                Analytics.log('cta_click', {
                    ctaId: ctaId,
                    slideIndex: slideIndex,
                    slideName: slideName,
                    slideNumber: slideNumber,
                    buttonType: buttonType,
                    buttonText: buttonText,
                    timestamp: Date.now()
                });
                
                // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒªãƒ³ã‚¯å‹•ä½œã‚’è¨±å¯ï¼ˆAnalyticsãƒ­ã‚°è¨˜éŒ²å¾Œï¼‰
                // e.preventDefault()ã‚’å‰Šé™¤ã—ã¦ã€é€šå¸¸ã®ãƒªãƒ³ã‚¯é·ç§»ã‚’è¨±å¯
            });
        });
        
        // ============================================
        // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³çŸ¢å°ï¼ˆ1ãƒšãƒ¼ã‚¸ç›®ã®ã¿è¡¨ç¤ºï¼‰
        // ============================================
        const nextArrow = document.getElementById('nextArrow');
        
        if (nextArrow) {
            nextArrow.addEventListener('click', function() {
                if (!this.classList.contains('disabled')) {
                    Analytics.log('nav_click', {
                        direction: 'next',
                        fromIndex: swiper.activeIndex,
                        timestamp: Date.now()
                    });
                    swiper.slideNext();
                }
            });
        }
        
        function updateNavArrows() {
            // 1ãƒšãƒ¼ã‚¸ç›®ï¼ˆindex=0ï¼‰ã®ã¿çŸ¢å°ã‚’è¡¨ç¤ºã€ãã‚Œä»¥å¤–ã¯éè¡¨ç¤º
            if (nextArrow) {
                if (swiper.activeIndex === 0) {
                    nextArrow.style.display = 'flex';
                } else {
                    nextArrow.style.display = 'none';
                }
            }
        }
        
        // åˆæœŸçŠ¶æ…‹ã®æ›´æ–°
        updateNavArrows();
        
        // ============================================
        // å›ºå®šCTAã®è¡¨ç¤ºåˆ¶å¾¡ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ï¼‰
        // ============================================
        function toggleFooterCta(slideIndex) {
            const footerCta = document.getElementById('footerCta');
            // ä¾‹: æœ€å¾Œã®ã‚¹ãƒ©ã‚¤ãƒ‰ã§ã¯éè¡¨ç¤ºã«ã™ã‚‹
            if (slideIndex === swiper.slides.length - 1) {
                footerCta.classList.add('hidden');
            } else {
                footerCta.classList.remove('hidden');
            }
        }
        
        // ============================================
        // ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
        // ============================================
        document.querySelectorAll('.swiper-pagination-bullet').forEach((bullet, index) => {
            bullet.addEventListener('click', function() {
                Analytics.log('pagination_click', {
                    targetIndex: index,
                    currentIndex: swiper.activeIndex,
                    timestamp: Date.now()
                });
            });
        });
        
        // ============================================
        // ãƒªã‚µã‚¤ã‚ºå¯¾å¿œ
        // ============================================
        let resizeTimer;
        window.addEventListener('resize', function() {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(function() {
                swiper.update();
                updateNavArrows();
                Analytics.log('resize', {
                    width: window.innerWidth,
                    height: window.innerHeight,
                    timestamp: Date.now()
                });
            }, 100);
        });
        
        // ============================================
        // Wicleã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ç”¨ã‚¹ãƒ©ã‚¤ãƒ‰é–²è¦§ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°
        // ============================================
        const viewedSlides = new Set(); // é‡è¤‡é˜²æ­¢ç”¨
        
        function trackSlideView(slideEl) {
            const slideName = slideEl.getAttribute('data-slide');
            const slideNumber = slideEl.getAttribute('data-slide-number');
            const slideId = slideName + '_' + slideNumber;
            
            // æ—¢ã«é€ä¿¡æ¸ˆã¿ã®å ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—
            if (viewedSlides.has(slideId)) {
                return;
            }
            
            // é€ä¿¡æ¸ˆã¿ã¨ã—ã¦ãƒãƒ¼ã‚¯
            viewedSlides.add(slideId);
            
            // å†…éƒ¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒã‚§ãƒƒã‚¯
            const isInternalUser = localStorage.getItem('wicle_internal_user') === 'true';
            
            // Wicleã«ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡ï¼ˆå†…éƒ¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ãªã„å ´åˆã®ã¿ï¼‰
            if (!isInternalUser && typeof wicle === 'function') {
                try {
                    wicle('event', 'slide_view', {
                        slide_name: slideName,
                        slide_number: parseInt(slideNumber, 10)
                    });
                } catch (e) {
                    console.warn('Wicle event send failed:', e);
                }
            } else if (isInternalUser) {
                console.log('ğŸš« Wicle slide_view event blocked (internal user):', slideName);
            }
            
            // Analyticsã«ã‚‚è¨˜éŒ²ï¼ˆå†…éƒ¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ã‚‚è¨˜éŒ²ï¼‰
            Analytics.log('slide_view', {
                slideName: slideName,
                slideNumber: parseInt(slideNumber, 10),
                isInternalUser: isInternalUser,
                timestamp: Date.now()
            });
        }
        
        // Intersection Observer APIã®è¨­å®š
        const slideObserverOptions = {
            root: null, // ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆã‚’åŸºæº–
            rootMargin: '0px',
            threshold: 0.5 // 50%ä»¥ä¸Šè¡¨ç¤ºã•ã‚ŒãŸã‚‰ç™ºç«
        };
        
        const slideObserver = new IntersectionObserver(function(entries) {
            entries.forEach(entry => {
                if (entry.isIntersecting && entry.intersectionRatio >= 0.5) {
                    trackSlideView(entry.target);
                }
            });
        }, slideObserverOptions);
        
        // å„ã‚¹ãƒ©ã‚¤ãƒ‰ã‚’ç›£è¦–å¯¾è±¡ã«è¿½åŠ 
        function initSlideTracking() {
            const slides = document.querySelectorAll('.swiper-slide');
            slides.forEach(slide => {
                slideObserver.observe(slide);
            });
        }
        
        // ============================================
        // åˆæœŸåŒ–å®Œäº†ãƒ­ã‚°
        // ============================================
        window.addEventListener('load', function() {
            Analytics.log('page_load', {
                totalSlides: swiper.slides.length,
                timestamp: Date.now()
            });
            
            // ã‚¹ãƒ©ã‚¤ãƒ‰ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã‚’åˆæœŸåŒ–
            initSlideTracking();
            
            // åˆæœŸçŠ¶æ…‹ã§ã‚¹ãƒ¯ã‚¤ãƒ—èª˜å°ã‚’è¡¨ç¤ºï¼ˆ1ãƒšãƒ¼ã‚¸ç›®ã®å ´åˆï¼‰
            const hint = document.querySelector('.swipe-hint');
            if (hint && swiper.activeIndex === 0) {
                hint.style.display = 'block';
            }
            
            // ç”»åƒèª­ã¿è¾¼ã¿å®Œäº†å¾Œã«ã‚¹ãƒ©ã‚¤ãƒ‰ã‚µã‚¤ã‚ºã‚’èª¿æ•´
            const images = document.querySelectorAll('.slide-image');
            images.forEach(img => {
                img.addEventListener('load', function() {
                    swiper.update();
                });
            });
        });
        
        // ============================================
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«Analyticsã‚’å…¬é–‹ï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰
        // ============================================
        window.Analytics = Analytics;
        window.SwiperInstance = swiper;
        
        // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ä½¿ç”¨å¯èƒ½:
        // Analytics.getEvents()
        // Analytics.getEventsByType('cta_click')
        // Analytics.getEventsByType('swipe')
    </script>
</body>
</html>
